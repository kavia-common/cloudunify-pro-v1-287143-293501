{"is_source_file": true, "format": "Python", "description": "This file implements WebSocket API routes for real-time activity streaming within an application. It includes an endpoint for connecting to the WebSocket and a helper function for extracting access tokens from headers, along with handling connection authentication, message processing, and cleanup.", "external_files": ["src.api.security", "src.api.services.activity_stream"], "external_methods": ["decode_access_token", "activity_manager.connect", "activity_manager.disconnect"], "published": ["websocket_activity_usage", "websocket_activity_stream"], "classes": [], "methods": [{"name": "Optional[str] _extract_token_from_headers(headers)", "description": "Utility function to extract Bearer token from headers.", "scope": "", "scopeKind": ""}, {"name": "websocket_activity_usage(organization_id: str, token: Optional[str] = Query(default=None, description=\"JWT access token\"))", "description": "Provides usage instruction and connection details for the WebSocket activity stream endpoint.", "scope": "", "scopeKind": ""}, {"name": "websocket_activity_stream(websocket: WebSocket, organization_id: str)", "description": "Main WebSocket handler that authenticates clients, manages connection lifecycle, and processes incoming messages.", "scope": "", "scopeKind": ""}], "calls": ["decode_access_token", "activity_manager.connect", "activity_manager.disconnect"], "search-terms": ["WebSocket activity stream", "activity_manager", "decode_access_token", "Authorization header", "WebSocket route", "WebSocket connection handler"], "state": 2, "file_id": 32, "knowledge_revision": 83, "git_revision": "663e484f4e351dd8c26eabaf0c08fd31ad09b7f7", "ctags": [{"_type": "tag", "name": "_extract_token_from_headers", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/src/api/routes/ws.py", "pattern": "/^def _extract_token_from_headers(headers) -> Optional[str]:$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "function", "signature": "(headers)"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/src/api/routes/ws.py", "pattern": "/^logger = logging.getLogger(\"cloudunify.routes.ws\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/src/api/routes/ws.py", "pattern": "/^router = APIRouter(tags=[\"Realtime\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "websocket_activity_stream", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/src/api/routes/ws.py", "pattern": "/^async def websocket_activity_stream(websocket: WebSocket, organization_id: str):$/", "language": "Python", "kind": "function", "signature": "(websocket: WebSocket, organization_id: str)"}, {"_type": "tag", "name": "websocket_activity_usage", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/src/api/routes/ws.py", "pattern": "/^async def websocket_activity_usage(organization_id: str, token: Optional[str] = Query(default=No/", "language": "Python", "kind": "function", "signature": "(organization_id: str, token: Optional[str] = Query(default=None, description=\"JWT access token\"))"}], "hash": "ba007d258d0b3359dc4c76113e5c7772", "format-version": 4, "code-base-name": "BackendAPI", "filename": "BackendAPI/src/api/routes/ws.py", "fields": [{"name": "logger = logging.getLogger(\"cloudunify.routes.ws\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "router = APIRouter(tags=[\"Realtime\"])", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"83": "663e484f4e351dd8c26eabaf0c08fd31ad09b7f7"}]}