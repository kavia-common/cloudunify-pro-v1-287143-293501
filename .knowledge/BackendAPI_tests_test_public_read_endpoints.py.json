{"is_source_file": true, "format": "Python", "description": "This file contains test cases for the public read endpoints of a FastAPI backend, including setup of test user, data ingestion, and validation of public GET endpoints for resources, costs, and recommendations.", "external_files": ["src.api.main", "src.api.models", "src.api.security"], "external_methods": ["get_password_hash", "select", "TestClient", "create_async_engine", "async_sessionmaker", "app"], "published": [], "classes": [], "methods": [{"name": "None _ensure_user(email: str, password: str, role: str = \"user\", is_active: bool = True)", "description": "Asynchronously ensures a user exists with the specified email, password, role, and activation status; creates or updates the user in the database.", "scope": "", "scopeKind": ""}, {"name": "str _login(email: str, password: str)", "description": "Logs in with the provided email and password to obtain an access token.", "scope": "", "scopeKind": ""}, {"name": "dict _auth_header(token: str)", "description": "Constructs an authorization header with the given access token.", "scope": "", "scopeKind": ""}, {"name": "None _insert_recommendation()", "description": "Asynchronously inserts a sample recommendation into the database.", "scope": "", "scopeKind": ""}, {"name": "test_public_reads_root_and_v1_paths()", "description": "Main test function that sets up test user, ingests resources and costs, inserts recommendations, and verifies public API endpoints for resources, costs, and recommendations.", "scope": "", "scopeKind": ""}], "calls": ["create_async_engine", "async_sessionmaker", "select", "session.execute", "session.commit", "session.add", "client.post", "client.get", "asyncio.get_event_loop().run_until_complete"], "search-terms": ["test_public_reads", "Recommendation", "/api/v1/resources", "/resources/bulk", "Recommendation", "public read endpoints", "Recommendation, User", "TestClient"], "state": 2, "file_id": 46, "knowledge_revision": 148, "git_revision": "eea004027b01bcc99e63b4e05665707233effba5", "ctags": [{"_type": "tag", "name": "TEST_EMAIL", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/test_public_read_endpoints.py", "pattern": "/^TEST_EMAIL = \"public-read-user@example.com\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "TEST_PASSWORD", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/test_public_read_endpoints.py", "pattern": "/^TEST_PASSWORD = \"PublicRead123!\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_auth_header", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/test_public_read_endpoints.py", "pattern": "/^def _auth_header(token: str) -> dict:$/", "language": "Python", "typeref": "typename:dict", "kind": "function", "signature": "(token: str)"}, {"_type": "tag", "name": "_ensure_user", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/test_public_read_endpoints.py", "pattern": "/^async def _ensure_user(email: str, password: str, role: str = \"user\", is_active: bool = True) ->/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(email: str, password: str, role: str = \"user\", is_active: bool = True)"}, {"_type": "tag", "name": "_insert_recommendation", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/test_public_read_endpoints.py", "pattern": "/^async def _insert_recommendation() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_login", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/test_public_read_endpoints.py", "pattern": "/^def _login(email: str, password: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(email: str, password: str)"}, {"_type": "tag", "name": "client", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/test_public_read_endpoints.py", "pattern": "/^client = TestClient(app)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "test_public_reads_root_and_v1_paths", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/test_public_read_endpoints.py", "pattern": "/^def test_public_reads_root_and_v1_paths():$/", "language": "Python", "kind": "function", "signature": "()"}], "hash": "79ae82bdc3983dd178813b325fe22fc3", "format-version": 4, "code-base-name": "BackendAPI", "filename": "BackendAPI/tests/test_public_read_endpoints.py", "fields": [{"name": "TEST_EMAIL = \"public-read-user@example.com\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "TEST_PASSWORD = \"PublicRead123!\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "client = TestClient(app)", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"148": "eea004027b01bcc99e63b4e05665707233effba5"}]}