{"is_source_file": true, "format": "Python", "description": "This file is a test configuration script for a FastAPI application. It sets environment variables, manages database setup and teardown, and defines fixtures for pytest testing framework to ensure a clean test environment with a test SQLite database. It includes functions for asynchronous coroutine execution and initializes the database schema before tests run.", "external_files": ["pytest", "fastapi.testclient.TestClient", "src.api.db", "src.api.main"], "external_methods": ["src.api.db.init_db", "src.api.main.app"], "published": [], "classes": [], "methods": [{"name": "_run(coro)", "description": "Runs an async coroutine from synchronous pytest code, handling event loop creation and management if needed.", "scope": "", "scopeKind": ""}, {"name": "_ensure_test_db_schema_and_startup()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["asyncio.get_event_loop", "asyncio.new_event_loop", "asyncio.set_event_loop", "src.api.db.init_db", "src.api.main.app", "TestClient", "c.get"], "search-terms": ["conftest.py", "pytest fixture", "FastAPI test setup", "database schema", "asyncio event loop", "SQLite test database"], "state": 2, "file_id": 47, "knowledge_revision": 149, "git_revision": "eea004027b01bcc99e63b4e05665707233effba5", "ctags": [{"_type": "tag", "name": "_BACKEND_ROOT", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/conftest.py", "pattern": "/^_BACKEND_ROOT = Path(__file__).resolve().parents[1]  # ...\\/BackendAPI$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_TEST_DB_PATH", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/conftest.py", "pattern": "/^_TEST_DB_PATH = _BACKEND_ROOT \\/ \"test_app.db\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_ensure_test_db_schema_and_startup", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/conftest.py", "pattern": "/^def _ensure_test_db_schema_and_startup():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_run", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/conftest.py", "pattern": "/^def _run(coro):$/", "language": "Python", "kind": "function", "signature": "(coro)"}, {"_type": "tag", "name": "db_mod", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/conftest.py", "pattern": "/^    from src.api import db as db_mod  # imported after DATABASE_URL is set$/", "file": true, "language": "Python", "kind": "unknown", "scope": "_ensure_test_db_schema_and_startup", "scopeKind": "function", "nameref": "unknown:db"}], "hash": "671eb4e9ab327732b4793dca521716a3", "format-version": 4, "code-base-name": "BackendAPI", "filename": "BackendAPI/tests/conftest.py", "fields": [{"name": "_BACKEND_ROOT = Path(__file__).resolve().parents[1]  # ...\\/BackendAPI", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "_TEST_DB_PATH = _BACKEND_ROOT \\/ \"test_app.db\"", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"149": "eea004027b01bcc99e63b4e05665707233effba5"}]}