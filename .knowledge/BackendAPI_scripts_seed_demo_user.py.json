{"is_source_file": true, "format": "Python", "description": "This script seeds a demo user into a database, creating or updating a user record with specified credentials and attributes. It interacts with SQLAlchemy ORM models, handles database URL normalization, and performs password hashing and verification.", "external_files": ["src.api.db", "src.api.models", "src.api.security"], "external_methods": ["get_database_url", "init_db", "User", "get_password_hash", "verify_password"], "published": [], "classes": [{"name": "SeedResult", "description": "A dataclass representing the result of attempting to seed a user, indicating if the user was created, updated, and the user ID."}], "methods": [{"name": "str _normalize_async_db_url(url: str)", "description": "Converts a database URL into an async-compatible SQLAlchemy URL format based on the scheme.", "scope": "", "scopeKind": ""}, {"name": "SeedResult _ensure_user( session: AsyncSession, *, email: str, password: str, role: str, is_active: bool, allow_plaintext_migration: bool, )", "description": "Ensures a user exists in the database with given attributes; updates if exists, creates if not.", "scope": "", "scopeKind": ""}, {"name": "None main()", "description": "Main entry point; parses command-line arguments, initializes the database, and seeds the demo user.", "scope": "", "scopeKind": ""}, {"name": "None _run()", "scope": "main", "scopeKind": "function", "description": "unavailable"}], "calls": ["select", "func.lower", "session.execute", "session.add", "session.commit", "session.refresh", "create_async_engine", "async_sessionmaker", "init_db", "get_database_url", "get_password_hash", "verify_password"], "search-terms": ["seed demo user", "async database URL normalization", "password migration", "SQLAlchemy async", "user creation or update"], "state": 2, "file_id": 45, "knowledge_revision": 136, "git_revision": "7392f1e0c830828ca56e1593b6f289b7f8f95fcb", "ctags": [{"_type": "tag", "name": "SeedResult", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/scripts/seed_demo_user.py", "pattern": "/^class SeedResult:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_ensure_user", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/scripts/seed_demo_user.py", "pattern": "/^async def _ensure_user($/", "language": "Python", "typeref": "typename:SeedResult", "kind": "function", "signature": "( session: AsyncSession, *, email: str, password: str, role: str, is_active: bool, allow_plaintext_migration: bool, )"}, {"_type": "tag", "name": "_normalize_async_db_url", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/scripts/seed_demo_user.py", "pattern": "/^def _normalize_async_db_url(url: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(url: str)"}, {"_type": "tag", "name": "_run", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/scripts/seed_demo_user.py", "pattern": "/^    async def _run() -> None:$/", "file": true, "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()", "scope": "main", "scopeKind": "function"}, {"_type": "tag", "name": "main", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/scripts/seed_demo_user.py", "pattern": "/^def main() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}], "hash": "3001d1142cf9c4120ad88bbb122fcf69", "format-version": 4, "code-base-name": "BackendAPI", "filename": "BackendAPI/scripts/seed_demo_user.py", "revision_history": [{"136": "7392f1e0c830828ca56e1593b6f289b7f8f95fcb"}]}