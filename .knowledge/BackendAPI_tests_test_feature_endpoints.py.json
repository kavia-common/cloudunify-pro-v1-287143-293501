{"is_source_file": true, "format": "Python", "description": "Test suite for FastAPI backend endpoints, focusing on resources, costs, recommendations, and automation rules. Contains setup functions for user roles, authentication, and various test cases for public and authenticated access.", "external_files": ["src.api.main", "src.api.models", "src.api.security"], "external_methods": ["get_password_hash"], "published": [], "classes": [], "methods": [{"name": "_ensure_user(email: str, password: str, role: str = \"user\", is_active: bool = True)", "description": "Asynchronously creates or updates a user with specified role and active status in the test database.", "scope": "", "scopeKind": ""}, {"name": "str _login(email: str, password: str)", "description": "Performs a login request to obtain an access token for a user.", "scope": "", "scopeKind": ""}, {"name": "dict _auth_header(token: str)", "description": "Generates authorization header with the provided token.", "scope": "", "scopeKind": ""}, {"name": "_insert_rec()", "scope": "test_recommendations_list_public_and_authed", "scopeKind": "function", "description": "unavailable"}, {"name": "test_automation_rules_get_post_rbac()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "test_costs_summary_public_and_authed()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "test_recommendations_list_public_and_authed()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "test_resources_list_public_and_authed_filters()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["asyncio.get_event_loop().run_until_complete", "client.post", "client.get"], "search-terms": ["test_feature_endpoints", "FastAPI", "resource filtering", "costs summary", "recommendations", "automation rules", "auth", "public and auth filters"], "state": 2, "file_id": 29, "knowledge_revision": 145, "git_revision": "eea004027b01bcc99e63b4e05665707233effba5", "revision_history": [{"72": "5740c92ab23881bce3da3d9b07dc83e055289f49"}, {"145": "eea004027b01bcc99e63b4e05665707233effba5"}], "ctags": [{"_type": "tag", "name": "TEST_ADMIN_EMAIL", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/test_feature_endpoints.py", "pattern": "/^TEST_ADMIN_EMAIL = \"features-admin@example.com\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "TEST_ADMIN_PASS", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/test_feature_endpoints.py", "pattern": "/^TEST_ADMIN_PASS = \"AdminPa55!\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "TEST_USER_EMAIL", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/test_feature_endpoints.py", "pattern": "/^TEST_USER_EMAIL = \"features-user@example.com\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "TEST_USER_PASS", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/test_feature_endpoints.py", "pattern": "/^TEST_USER_PASS = \"UserPa55!\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_auth_header", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/test_feature_endpoints.py", "pattern": "/^def _auth_header(token: str) -> dict:$/", "language": "Python", "typeref": "typename:dict", "kind": "function", "signature": "(token: str)"}, {"_type": "tag", "name": "_ensure_user", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/test_feature_endpoints.py", "pattern": "/^async def _ensure_user(email: str, password: str, role: str = \"user\", is_active: bool = True):$/", "language": "Python", "kind": "function", "signature": "(email: str, password: str, role: str = \"user\", is_active: bool = True)"}, {"_type": "tag", "name": "_insert_rec", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/test_feature_endpoints.py", "pattern": "/^    async def _insert_rec():$/", "file": true, "language": "Python", "kind": "function", "signature": "()", "scope": "test_recommendations_list_public_and_authed", "scopeKind": "function"}, {"_type": "tag", "name": "_login", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/test_feature_endpoints.py", "pattern": "/^def _login(email: str, password: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(email: str, password: str)"}, {"_type": "tag", "name": "client", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/test_feature_endpoints.py", "pattern": "/^client = TestClient(app)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "test_automation_rules_get_post_rbac", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/test_feature_endpoints.py", "pattern": "/^def test_automation_rules_get_post_rbac():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "test_costs_summary_public_and_authed", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/test_feature_endpoints.py", "pattern": "/^def test_costs_summary_public_and_authed():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "test_recommendations_list_public_and_authed", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/test_feature_endpoints.py", "pattern": "/^def test_recommendations_list_public_and_authed():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "test_resources_list_public_and_authed_filters", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/test_feature_endpoints.py", "pattern": "/^def test_resources_list_public_and_authed_filters():$/", "language": "Python", "kind": "function", "signature": "()"}], "hash": "b73c60410868cec5cfb5eb2b09fb7f75", "format-version": 4, "code-base-name": "BackendAPI", "filename": "BackendAPI/tests/test_feature_endpoints.py", "fields": [{"name": "TEST_ADMIN_EMAIL = \"features-admin@example.com\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "TEST_ADMIN_PASS = \"AdminPa55!\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "TEST_USER_EMAIL = \"features-user@example.com\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "TEST_USER_PASS = \"UserPa55!\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "client = TestClient(app)", "scope": "", "scopeKind": "", "description": "unavailable"}]}