{"is_source_file": true, "format": "Python", "description": "This file contains unit tests for the authentication module of a FastAPI application. It uses TestClient for request simulation, performs user creation, login, and authorization tests, and interacts with database models and security functions.", "external_files": ["src.api.main", "src.api.models", "src.api.security"], "external_methods": ["get_password_hash", "select", "create_async_engine", "async_sessionmaker", "AsyncSession"], "published": [], "classes": [], "methods": [{"name": "_create_user(email: str, password: str, role: str = \"user\", is_active: bool = True)", "description": "Asynchronously creates or updates a user in the database with specified email, password, role, and active status.", "scope": "", "scopeKind": ""}, {"name": "test_login_success_and_failure()", "description": "Tests the login endpoint for successful login with valid credentials and failure with incorrect password.", "scope": "", "scopeKind": ""}, {"name": "test_rbac_admin_only_access()", "description": "Tests role-based access control, verifying that a non-admin user cannot access admin endpoints and that an admin can.", "scope": "", "scopeKind": ""}], "calls": ["client.post", "client.get", "asyncio.get_event_loop().run_until_complete", "session.execute", "session.commit", "session.add"], "search-terms": ["auth_tests", "login", "RBAC", "admin_endpoint", "user_creation", "async_sqlalchemy", "FastAPI TestClient"], "state": 2, "file_id": 20, "knowledge_revision": 51, "git_revision": "06a422bc83e613264740ebb974dc8855dceb4a35", "ctags": [{"_type": "tag", "name": "TEST_ADMIN_EMAIL", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/test_auth.py", "pattern": "/^TEST_ADMIN_EMAIL = \"auth-admin@example.com\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "TEST_ADMIN_PASS", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/test_auth.py", "pattern": "/^TEST_ADMIN_PASS = \"Adm1nPa$$!\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "TEST_USER_EMAIL", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/test_auth.py", "pattern": "/^TEST_USER_EMAIL = \"auth-user@example.com\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "TEST_USER_PASS", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/test_auth.py", "pattern": "/^TEST_USER_PASS = \"Pa$$w0rd!\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_create_user", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/test_auth.py", "pattern": "/^async def _create_user(email: str, password: str, role: str = \"user\", is_active: bool = True):$/", "language": "Python", "kind": "function", "signature": "(email: str, password: str, role: str = \"user\", is_active: bool = True)"}, {"_type": "tag", "name": "client", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/test_auth.py", "pattern": "/^client = TestClient(app)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "test_login_success_and_failure", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/test_auth.py", "pattern": "/^def test_login_success_and_failure():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "test_rbac_admin_only_access", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/tests/test_auth.py", "pattern": "/^def test_rbac_admin_only_access():$/", "language": "Python", "kind": "function", "signature": "()"}], "hash": "d90d67ab9d91c1b947abee5c773fed9e", "format-version": 4, "code-base-name": "BackendAPI", "filename": "BackendAPI/tests/test_auth.py", "fields": [{"name": "TEST_ADMIN_EMAIL = \"auth-admin@example.com\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "TEST_ADMIN_PASS = \"Adm1nPa$$!\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "TEST_USER_EMAIL = \"auth-user@example.com\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "TEST_USER_PASS = \"Pa$$w0rd!\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "client = TestClient(app)", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"51": "06a422bc83e613264740ebb974dc8855dceb4a35"}]}