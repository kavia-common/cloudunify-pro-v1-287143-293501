{"is_source_file": true, "format": "Python", "description": "This source file defines functions for seeding default development users into a database, including logic to check environment variables, determine whether seeding should occur, and creating or updating user records accordingly. It includes async functions to ensure users exist with specified roles and credentials, primarily used during development to set up default admin and user accounts.", "external_files": ["src.api.db", "src.api.models", "src.api.security"], "external_methods": ["get_session", "get_database_url", "User", "get_password_hash", "verify_password"], "published": ["maybe_seed_dev_users"], "classes": [], "methods": [{"name": "bool _truthy_env(value: Optional[str], default: bool = False)", "description": "Interprets environment variable string values as boolean flags based on common truthy strings.", "scope": "", "scopeKind": ""}, {"name": "bool _should_seed_default()", "description": "Determines default behavior for whether to seed users based on environment variables and database type.", "scope": "", "scopeKind": ""}, {"name": "None _ensure_user(session: AsyncSession, email: str, password: str, role: str, is_active: bool = True)", "description": "Checks if a user with the specified email exists; if not, creates or updates it with provided credentials and role.", "scope": "", "scopeKind": ""}, {"name": "None maybe_seed_dev_users()", "description": "Main public async function to seed default admin and user accounts in development environment if enabled by environment variables.", "scope": "", "scopeKind": ""}], "calls": ["select(User).where(func.lower(User.email) == email_norm)", "session.execute", "session.add", "session.commit", "get_session"], "search-terms": ["dev_seed", "seed users", "development environment", "async seed functions", "environment variable seeding", "user creation", "role assignment"], "state": 2, "file_id": 38, "knowledge_revision": 103, "git_revision": "378e982de5aa6f5f944521eac338a56dd4d39372", "revision_history": [{"101": "93035a18be1ee7efd9cac278f28211da731223a7"}, {"103": "378e982de5aa6f5f944521eac338a56dd4d39372"}], "ctags": [{"_type": "tag", "name": "_ensure_user", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/src/api/services/dev_seed.py", "pattern": "/^async def _ensure_user(session: AsyncSession, email: str, password: str, role: str, is_active: b/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(session: AsyncSession, email: str, password: str, role: str, is_active: bool = True)"}, {"_type": "tag", "name": "_should_seed_default", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/src/api/services/dev_seed.py", "pattern": "/^def _should_seed_default() -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_truthy_env", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/src/api/services/dev_seed.py", "pattern": "/^def _truthy_env(value: Optional[str], default: bool = False) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "(value: Optional[str], default: bool = False)"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/src/api/services/dev_seed.py", "pattern": "/^logger = logging.getLogger(\"cloudunify.dev_seed\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "maybe_seed_dev_users", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/src/api/services/dev_seed.py", "pattern": "/^async def maybe_seed_dev_users() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}], "hash": "95de3f9497758e8bf9c8a30b1ee86549", "format-version": 4, "code-base-name": "BackendAPI", "filename": "BackendAPI/src/api/services/dev_seed.py", "fields": [{"name": "logger = logging.getLogger(\"cloudunify.dev_seed\")", "scope": "", "scopeKind": "", "description": "unavailable"}]}