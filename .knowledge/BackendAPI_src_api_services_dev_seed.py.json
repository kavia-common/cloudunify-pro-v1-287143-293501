{"is_source_file": true, "format": "Python", "description": "This file contains utility functions and an asynchronous routine to seed development users (admin, user, and optional demo user) into a database. It checks environment variables to determine whether seeding should occur and ensures the existence and correctness of specified users.", "external_files": ["src.api.db", "src.api.models", "src.api.security"], "external_methods": ["get_session", "get_database_url", "User", "get_password_hash", "verify_password"], "published": ["maybe_seed_dev_users"], "classes": [], "methods": [{"name": "bool _truthy_env(value: Optional[str], default: bool = False)", "description": "Interprets environment variable string values as booleans based on common truthy representations.", "scope": "", "scopeKind": ""}, {"name": "bool _should_seed_default()", "description": "Determines default seeding behavior based on environment variables and database URL.", "scope": "", "scopeKind": ""}, {"name": "None _ensure_user(session: AsyncSession, email: str, password: str, role: str, is_active: bool = True)", "description": "Checks if a user with specified email exists; creates or updates the user to match provided role, password, and active status if necessary.", "scope": "", "scopeKind": ""}, {"name": "None maybe_seed_dev_users()", "description": "Main async function that orchestrates the seeding of development users based on environment flags and default configurations.", "scope": "", "scopeKind": ""}], "calls": ["select", "func.lower", "session.execute", "session.add", "session.commit", "get_password_hash", "verify_password", "get_session", "get_database_url"], "search-terms": ["dev_seed", "seeding", "development users", "async seed", "environment configuration"], "state": 2, "file_id": 38, "knowledge_revision": 105, "git_revision": "97985b25aa8e12044e2e74fdd8ce514dc39f4ca4", "revision_history": [{"101": "93035a18be1ee7efd9cac278f28211da731223a7"}, {"103": "378e982de5aa6f5f944521eac338a56dd4d39372"}, {"105": "97985b25aa8e12044e2e74fdd8ce514dc39f4ca4"}], "ctags": [{"_type": "tag", "name": "_ensure_user", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/src/api/services/dev_seed.py", "pattern": "/^async def _ensure_user(session: AsyncSession, email: str, password: str, role: str, is_active: b/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(session: AsyncSession, email: str, password: str, role: str, is_active: bool = True)"}, {"_type": "tag", "name": "_should_seed_default", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/src/api/services/dev_seed.py", "pattern": "/^def _should_seed_default() -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_truthy_env", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/src/api/services/dev_seed.py", "pattern": "/^def _truthy_env(value: Optional[str], default: bool = False) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "(value: Optional[str], default: bool = False)"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/src/api/services/dev_seed.py", "pattern": "/^logger = logging.getLogger(\"cloudunify.dev_seed\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "maybe_seed_dev_users", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/src/api/services/dev_seed.py", "pattern": "/^async def maybe_seed_dev_users() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}], "hash": "42c590ebfe3ea1866b4dbb8d65e57c3b", "format-version": 4, "code-base-name": "BackendAPI", "filename": "BackendAPI/src/api/services/dev_seed.py", "fields": [{"name": "logger = logging.getLogger(\"cloudunify.dev_seed\")", "scope": "", "scopeKind": "", "description": "unavailable"}]}