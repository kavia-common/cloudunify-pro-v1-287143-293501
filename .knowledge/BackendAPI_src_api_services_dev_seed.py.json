{"is_source_file": true, "format": "Python", "description": "This file provides functionality to seed default user data into a database for development purposes. It defines functions to verify if seeding should occur based on environment variables, and ensures the presence of specific admin and user accounts, including optional custom demo users. The main function, 'maybe_seed_dev_users', orchestrates this process, enabling development-specific test users and demo accounts with configurable credentials.", "external_files": ["src.api.db", "src.api.models", "src.api.security"], "external_methods": ["get_session", "get_database_url", "get_password_hash", "verify_password"], "published": ["maybe_seed_dev_users"], "classes": [], "methods": [{"name": "bool _truthy_env(value: Optional[str], default: bool = False)", "description": "Interprets common truthy environment variable values (e.g., '1', 'true', 'yes') into boolean True/False.", "scope": "", "scopeKind": ""}, {"name": "bool _should_seed_default()", "description": "Determines default seeding behavior based on environment variables and database URL, defaulting to true in development or SQLite environments.", "scope": "", "scopeKind": ""}, {"name": "None _ensure_user(session: AsyncSession, email: str, password: str, role: str, is_active: bool = True)", "description": "Ensures a user with specified email exists in the database with the correct role, active status, and password hash; creates or updates the user as necessary.", "scope": "", "scopeKind": ""}, {"name": "None maybe_seed_dev_users()", "description": "Main async function that seeds default development users and demo accounts if environment configuration allows.", "scope": "", "scopeKind": ""}], "calls": ["select", "func.lower", "session.execute", "session.commit", "session.add", "get_password_hash", "verify_password", "_truthy_env", "get_session", "get_database_url"], "search-terms": ["dev_seed", "seed users", "environment-based seeding", "development users", "async seed", "user creation", "role-based user setup", "demo account", "environment variable parsing"], "state": 2, "file_id": 38, "knowledge_revision": 137, "git_revision": "abd2e053ce2efa58afbe5299b274d0e773acfbe6", "revision_history": [{"101": "93035a18be1ee7efd9cac278f28211da731223a7"}, {"103": "378e982de5aa6f5f944521eac338a56dd4d39372"}, {"105": "97985b25aa8e12044e2e74fdd8ce514dc39f4ca4"}, {"110": "41043e0e28c819cc3f4ebaa2f26cb85a5ce2f254"}, {"133": "41043e0e28c819cc3f4ebaa2f26cb85a5ce2f254"}, {"137": "abd2e053ce2efa58afbe5299b274d0e773acfbe6"}], "ctags": [{"_type": "tag", "name": "_ensure_user", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/src/api/services/dev_seed.py", "pattern": "/^async def _ensure_user(session: AsyncSession, email: str, password: str, role: str, is_active: b/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(session: AsyncSession, email: str, password: str, role: str, is_active: bool = True)"}, {"_type": "tag", "name": "_should_seed_default", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/src/api/services/dev_seed.py", "pattern": "/^def _should_seed_default() -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_truthy_env", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/src/api/services/dev_seed.py", "pattern": "/^def _truthy_env(value: Optional[str], default: bool = False) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "(value: Optional[str], default: bool = False)"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/src/api/services/dev_seed.py", "pattern": "/^logger = logging.getLogger(\"cloudunify.dev_seed\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "maybe_seed_dev_users", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293501/BackendAPI/src/api/services/dev_seed.py", "pattern": "/^async def maybe_seed_dev_users() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}], "hash": "2a114adb67176d3227a4996497c20d69", "format-version": 4, "code-base-name": "BackendAPI", "filename": "BackendAPI/src/api/services/dev_seed.py", "fields": [{"name": "logger = logging.getLogger(\"cloudunify.dev_seed\")", "scope": "", "scopeKind": "", "description": "unavailable"}]}